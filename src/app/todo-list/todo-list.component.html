<div class="list-edit-panel">
  <button color="primary"
          title="Создать задачу"
          mat-raised-button
          mat-icon-button
          (click)="onToDoAdd()"
  >
    <mat-icon>add</mat-icon>
  </button>

  <mat-slide-toggle color="primary"
                    [checked]="isEditMode"
                    (change)="onEditModeChange($event.checked)"
  >
    Режим редактирования
  </mat-slide-toggle>
</div>

<div cdkDropList
     (cdkDropListDropped)="onToDoDrop($event)"
>
  <mat-accordion displayMode="flat">
    <mat-expansion-panel *ngFor="let todo of toDos"
                         cdkDrag
                         [tlTodoState]="todo.date"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ todo.name }}
        </mat-panel-title>
        <mat-panel-description>
            {{ todo.date | date:'dd.MM.yyyy HH:mm' }}

            <div class="edit-panel" [ngClass]="{ 'hidden': !isEditMode }">
              <button title="Редактировать задачу"
                      mat-icon-button
                      (click)="onToDoEdit(todo, $event)"
              >
                <mat-icon>edit</mat-icon>
              </button>
              <button title="Удалить задачу"
                      color="warn"
                      mat-icon-button
                      (click)="onToDoDelete(todo, $event)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
        </mat-panel-description>
      </mat-expansion-panel-header>
      {{ todo.description }}
    </mat-expansion-panel>
  </mat-accordion>
</div>


